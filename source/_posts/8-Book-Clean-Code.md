---
title: 代码整洁之道-笔记
comments: true
date: 2016-08-06 13:50
categories: [读书笔记]
tags: [读书笔记]
keywords: 代码整洁之道
---

### 启示摘要

- 整洁的代码只做好一件事! 代码逻辑应该直截了当,让缺陷难以隐藏;尽量减少依赖关系,使之便于维护

- 它只提供一种而非多种做一件事的途径,它使用有意义的命名,明确定义和提供清晰的尽量少的API

- 标示参数丑陋不堪,向函数传入布尔值简直就是骇人听闻的做法,相当于大声宣布本函数不止做一件事情

- 函数的第一规则是要短小,第二条规则是还要更短小. 20行以内

- 函数应该只做一件事,做好这件事: 里边会有多个步骤; 当前函数无法再拆分出另一个函数

- 每个函数一个抽象层级[!!! 不太懂!!!], 例如: 拼接html字符串 与 其他参数验证属于两个层级

- 函数参数保持在2个以下, 不要出现3个参数以上的, 否则以对象方式传递

- 极端情况,如果一个函数做了多个事情,应该以正确的函数名称体现
    - checkPassword 里边做了session初始化
    - 改为: checkPasswordAndInitSession

- 分隔指令与询问, 比如 checkXXX 时,不要做例如修改的操作


- Do't Repeat Yourself

- 与其花时间编写解释你搞出来的糟糕的代码的注释,不如花时间清理那堆糟糕的代码

- 得墨忒耳定律认为,模块不应了解它所操作对象的内部情形;方法不应调用任何函数返回的对象的方法,即只跟朋友谈话,不与陌生人谈话
    - 对象暴露行为,隐藏数据. 便于添加新对象类型而无需修改既有的行为
    - 有时希望能够灵活的添加新数据类型,此时倾向于使用对象;有时希望能够灵活的添加新行为,此时倾向于使用数据类型和过程

- 区分数据结构和对象, 最为精炼的数据结构是一个只有公共变量没有函数的类, 这种数据结构被称为数据传送对象DTO(Data Transfer Objects)

- 整洁的测试 (F.I.R.S.T)
    - 快速 fast
    - 独立 independent
    - 可重复 repeatable
    - 自足验证 self-validating
    - 及时 timely


